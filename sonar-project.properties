# ============================================================================
# SonarQube/SonarCloud Configuration
# CRM Alforis - Full Stack Application
# Organization: michelalforis
# ============================================================================

# Project identification
sonar.projectKey=MichelAlforis_crm-alforis
sonar.projectName=Alforis CRM
sonar.projectVersion=2.0.0

# Organization (for SonarCloud)
# Set in GitHub Secrets: SONAR_ORGANIZATION

# Source code location
sonar.sources=crm-frontend/app,crm-frontend/components,crm-frontend/hooks,crm-frontend/lib,crm-backend/app,crm-backend/lib
sonar.tests=crm-frontend/__tests__,crm-backend/tests

# Exclusions - CRITICAL: Exclure tous les fichiers de d√©pendances
sonar.exclusions=\
  **/node_modules/**,\
  **/.next/**,\
  **/dist/**,\
  **/build/**,\
  **/coverage/**,\
  **/__pycache__/**,\
  **/migrations/**,\
  **/*.config.js,\
  **/*.config.ts,\
  **/public/**,\
  **/static/**,\
  **/.env*,\
  **/package-lock.json,\
  **/yarn.lock,\
  **/pnpm-lock.yaml,\
  **/site-packages/**,\
  **/venv/**,\
  **/.venv/**,\
  **/pip/**

# Test exclusions (don't analyze test files for coverage)
sonar.test.exclusions=\
  **/__tests__/**,\
  **/tests/**,\
  **/*.test.ts,\
  **/*.test.tsx,\
  **/*.test.js,\
  **/*.spec.ts,\
  **/*.spec.tsx,\
  **/*.spec.js

# ============================================================================
# FRONTEND (Next.js + TypeScript)
# ============================================================================

# TypeScript/JavaScript settings
sonar.typescript.node=20
sonar.javascript.lcov.reportPaths=crm-frontend/coverage/lcov.info
sonar.typescript.tsconfigPath=crm-frontend/tsconfig.json

# Frontend-specific exclusions
sonar.coverage.exclusions=\
  crm-frontend/**/*.config.ts,\
  crm-frontend/**/*.d.ts,\
  crm-frontend/app/**/layout.tsx,\
  crm-frontend/app/**/loading.tsx,\
  crm-frontend/app/**/error.tsx,\
  crm-frontend/app/**/not-found.tsx,\
  crm-frontend/middleware.ts,\
  crm-frontend/vitest.setup.ts,\
  crm-frontend/playwright.config.ts

# ============================================================================
# BACKEND (Python + FastAPI)
# ============================================================================

# Python settings
sonar.python.version=3.12
sonar.python.coverage.reportPaths=crm-backend/coverage.xml

# Backend-specific exclusions
sonar.coverage.exclusions=\
  crm-backend/alembic/**,\
  crm-backend/scripts/**,\
  crm-backend/main.py

# ============================================================================
# CODE QUALITY SETTINGS
# ============================================================================

# Encoding
sonar.sourceEncoding=UTF-8

# Duplication detection
sonar.cpd.exclusions=\
  **/__tests__/**,\
  **/migrations/**

# Quality Gates
# These will be enforced in SonarCloud
sonar.qualitygate.wait=false

# Links
sonar.links.homepage=https://alforis.fr
sonar.links.ci=https://github.com/MichelAlforis/crm-alforis/actions
sonar.links.scm=https://github.com/MichelAlforis/crm-alforis
sonar.links.issue=https://github.com/MichelAlforis/crm-alforis/issues
