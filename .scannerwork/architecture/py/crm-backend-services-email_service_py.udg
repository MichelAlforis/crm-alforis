
1.0PythonFrontend"1760943913559*py2.Bø

imports1

extends2

returns3

	has param4

module5


class6

function7
*
%crm-backend/services/email_service.py9

services.email_service11

hashlib12

logging14

re16

datetime18

typing20


sqlalchemy22

sqlalchemy.orm24

core.config26

core.exceptions28

models.email30

schemas.email32

services.base34

sendgrid36

sendgrid.helpers.mail38

requests40
1
+services.email_service.EmailCampaignService42

services.base.BaseService44
=
7services.email_service.EmailCampaignService._sync_steps46
 
models.email.EmailCampaign48

typing.Sequence50
9
3services.email_service.EmailCampaignService.get_all52

tuple54
	
int56
:
4services.email_service.EmailCampaignService.__init__58
$
sqlalchemy.orm.session.Session60
8
2services.email_service.EmailCampaignService.create62
'
!schemas.email.EmailCampaignCreate64
8
2services.email_service.EmailCampaignService.update66
'
!schemas.email.EmailCampaignUpdate68
;
5services.email_service.EmailCampaignService.get_by_id70
2
,services.email_service.EmailAnalyticsService72
E
?services.email_service.EmailAnalyticsService.get_campaign_stats74
.
(schemas.email.EmailCampaignStatsResponse76
I
Cservices.email_service.EmailAnalyticsService._count_distinct_events78
!
models.email.EmailEventType80
;
5services.email_service.EmailAnalyticsService.__init__82
D
>services.email_service.EmailAnalyticsService._stats_by_variant84


list86
@
:services.email_service.EmailAnalyticsService._count_events88
1
+services.email_service.EmailDeliveryService90
:
4services.email_service.EmailDeliveryService.__init__92
C
=services.email_service.EmailDeliveryService._resolve_template94

models.email.EmailSend96
@
:services.email_service.EmailDeliveryService._build_context98

dict100
D
=services.email_service.EmailDeliveryService._should_skip_step102

bool104
J
Cservices.email_service.EmailDeliveryService._assign_ab_test_variant106
#
schemas.email.EmailRecipient108
K
Dservices.email_service.EmailDeliveryService._build_recipient_context110
D
=services.email_service.EmailDeliveryService.schedule_campaign112
1
*schemas.email.EmailCampaignScheduleRequest114
N
Gservices.email_service.EmailDeliveryService._create_sends_for_recipient116

datetime.datetime118
;
4services.email_service.EmailDeliveryService.send_now120
E
>services.email_service.EmailDeliveryService._send_via_sendgrid122


str124
D
=services.email_service.EmailDeliveryService._send_via_mailgun126
4
-services.email_service.render_dynamic_content128
2
+services.email_service.EmailTemplateService130
9
2services.email_service.EmailTemplateService.update132
!
models.email.EmailTemplate134
(
!schemas.email.EmailTemplateUpdate136
;
4services.email_service.EmailTemplateService.__init__138
>
7services.email_service.EmailTemplateService.get_library140
9
2services.email_service.EmailTemplateService.create142
(
!schemas.email.EmailTemplateCreate144
8
1services.email_service.EmailEventIngestionService146
L
Eservices.email_service.EmailEventIngestionService._update_send_status148
L
Eservices.email_service.EmailEventIngestionService._map_sendgrid_event150
A
:services.email_service.EmailEventIngestionService.__init__152
O
Hservices.email_service.EmailEventIngestionService.ingest_sendgrid_events154

typing.Iterable156
T
Mservices.email_service.EmailEventIngestionService._resolve_send_from_sendgrid158
2
+services.email_service._resolve_placeholder160J

8
89jý
 
10
10115 *
8 (

13
13125

15
15145

17
17165

19
19185

21
21205

23
23225

25
25245

27
27265

29
29285

31
31305

33
33325

35
35345

37
37365

39
39385

41
41405

43
43426 210

45
45446

47
47467 243

49
49486

51
51506

53
53527 243

55
55546

57
57566

59
59587 243

61
61606

63
63627 243

65
65646

67
67667 243

69
69686

71
71707 243

73
73726 210

75
75747 273

77
77766

79
79787 273

81
81806

83
83827 273

85
85847 273

87
87866

89
89887 273

91
91906 210

93
93927 291

95
95947 291

97
97966

99
99987 291

101
1011006

103
1031027 291

105
1051046

107
1071067 291

109
1091086

111
1111107 291

113
1131127 291

115
1151146

117
1171167 291

119
1191186

121
1211207 291

123
1231227 291

125
1251246

127
1271267 291

129
1291287 210

131
1311306 210

133
1331327 2131

135
1351346

137
1371366

139
1391387 2131

141
1411407 2131

143
1431427 2131

145
1451446

147
1471466 210

149
1491487 2147

151
1511507 2147

153
1531527 2147

155
1551547 2147

157
1571566

159
1591587 2147

161
1611607 210r±

10131*
8 (

10151*
8 (

10171*
8 (


10191*
8 ()

10211*
8 (H

10231*
8 (,

10251*
8 (1

10271*
8
 
(!

10291*
8 (M

10311*
8 (

10331*
8 !(

10351*
8# #(&

10371*
8é é(3

10391*
8ê ê(3

10411*
8¢ ¢(

43452*
8€ €(

47494*
8Ø	 Ø(

47514*
8Ø	 Ø(

53553*
8” ”(

53574*
8” ”(

53574*
8” ”(

59614*
8ƒ	 ƒ(

63493*
8ª ª(

63654*
8ª ª(

67493*
8Ä Ä(

67574*
8Ä Ä(

67694*
8Ä Ä(

71493*
8† †(

71574*
8† †(

75773*
8Ó	 Ó(

75574*
8Ó	 Ó(

79573*
8—	 —(

79574*
8—	 —(

79814*
8—	 —(

83614*
8Ð	 Ð(

85873*
8¢	 ¢(

85574*
8¢	 ¢(

89573*
8Œ	 Œ(

89574*
8Œ	 Œ(

89814*
8Œ	 Œ(

93614*
8û	 û(

95974*
8¸	 ¸(

991013*
8Å	 Å(

99974*
8Å	 Å(

1031053*
8×	 ×(

103494*
8×	 ×(

107494*
8¶	 ¶( 

1071094*
8¶	 ¶( 

1111013*
8Ä	 Ä(!

1111094*
8Ä	 Ä(!

113553*
8þ	 þ(

113574*
8þ	 þ(

1131154*
8þ	 þ(

117873*
8à	 à($

117494*
8à	 à($

1171094*
8à	 à($

1171194*
8à	 à($

121973*
8ˆ	 ˆ(

121574*
8ˆ	 ˆ(

1231013*
8à	 à(

123974*
8à	 à(

1231254*
8à	 à(

1231254*
8à	 à(

1271013*
8š	 š(

127974*
8š	 š(

1271254*
8š	 š(

1271254*
8š	 š(

1291253*
8G G(

1291254*
8G G(

1291014*
8G G(

131452*
8Q Q(

1331353*
8e e(

133574*
8e e(

1331374*
8e e(

139614*
8T	 T(

141873*
8u u(

1411054*
8u u(

1431353*
8W W(

1431454*
8W W(

149974*
8¶	 ¶(

149814*
8¶	 ¶(

153614*
8Í	 Í(

155573*
8Ð	 Ð(

1551574*
8Ð	 Ð(

1591014*
8Œ	 Œ($

1611253*
89 9(

1611014*
89 9(

1611254*
89 9(